{"componentChunkName":"component---src-components-mdx-layout-js","path":"/blog/2019-10-01-overriding-mdx-in-docz/","result":{"data":{"mdx":{"id":"feaec4fd-de6e-57bc-8895-67b0e2167936","frontmatter":{"title":"Overriding Mdx in Docz","commentApiId":9},"timeToRead":2,"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Overriding Mdx in Docz\",\n  \"draft\": false,\n  \"layout\": \"default\",\n  \"commentApiId\": 9\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", {\n    \"id\": \"how-to-override-the-mdx-components-when-using-docz\"\n  }, \"How to override the mdx components when using Docz\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Why would i event want to do that?\")), mdx(\"p\", null, \"There are are few reasons why its helpful\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"you can replace a tags with gatsby's \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Link\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"you can override the sidebar, header or content\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"you can override the whole page\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"you can make a custom li that uses icons\")), mdx(\"p\", null, \"the possibilities are endless.\"), mdx(\"p\", null, \"One of the eaiser things we could do would be to completley override the\\nlayout of a given page.   \"), mdx(\"p\", null, \"All you need to do for that to work is to export the\\na component as default from the mdx file.  \"), mdx(\"p\", null, \"The biggest issue with this is you lose all context from the mdx.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"As well as all mdx styling. \"), mdx(\"p\", null, \"Another solution would be to just replace the default \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Layout\"), \" component from\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gatsby-theme-docz\"), \".  \"), mdx(\"p\", null, \"This lets us keep our context and styling\\nBut it replaces all of the pages.\"), mdx(\"p\", null, \"Now what if I want to override only selective pages like the first solution,   \"), mdx(\"p\", null, \"But i want to keep my styling and context like in the second solution?\"), mdx(\"p\", null, \"Here is a way to get the best of both worlds.\"), mdx(\"p\", null, \"First we need a way to communicate that we want to override the pages layoput.  \"), mdx(\"p\", null, \"The first solution uses the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"default export\"), \" feature of javascript to do this.  \"), mdx(\"p\", null, \"In our solution to make it feel more like a regular mdx document and less like a javascript file we will utilize its front-matter.  \"), mdx(\"p\", null, \"To do that we just add a field to our pages front-matter.\"), mdx(\"p\", null, \"I called mine \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"layout\"), \". \"), mdx(\"p\", null, \"And i think to start i will have 3\"), mdx(\"p\", null, \"The default layout provided by docz  \"), mdx(\"p\", null, \"One without the sidebar\"), mdx(\"p\", null, \"And one that is a blank slate,\\nNo sidebar or header.  \"), mdx(\"p\", null, \"So the three options for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"layout\"), \" are:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"default\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"content (no sidebar)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"empty (nothing)\")), mdx(\"p\", null, \"so for example to remove the sidebar from a page i will create a new\\nmdx file and set the front-matter like this:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-md\"\n  }), \"---\\n  name: My New Post\\n  layout: content\\n---\\n\")), mdx(\"p\", null, \"See here i set \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"layout\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"content\")), mdx(\"p\", null, \"now we need to take that \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"layout\"), \" value and do something with it,\\nthe rest of this post assumes you have a minimal docz site setup,\\nif not checkout their \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docz.site\"\n  }), \"docs\")), mdx(\"p\", null, \"First we need to override the docz theme to inject our layout.\"), mdx(\"p\", null, \"so create a file at \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"project_root/src/gatsby-theme-docz/index.js\")), mdx(\"p\", null, \"and add this to it:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"filename=src/gatsby-theme-docz/index.js\",\n    \"filename\": \"src/gatsby-theme-docz/index.js\"\n  }), \"/** @jsx jsx */\\nimport { jsx } from 'theme-ui'\\nimport { theme, useConfig, ComponentsProvider, useCurrentDoc } from 'docz'\\nimport { Styled, ThemeProvider } from 'theme-ui'\\n\\nimport defaultTheme from 'gatsby-theme-docz/srx/theme'\\nimport components from 'gatsby-theme-docz/src/components'\\n\\nconst Theme = ({ children }) => {\\n  const { themeConfig } = useConfig()\\n  return (\\n    <ThemeProvider theme={themeConfig}>\\n      <ComponentsProvider components={components}>\\n        <Styled.root>{children}</Styled.root>\\n      </ComponentsProvider>\\n    </ThemeProvider>\\n  )\\n}\\n\\nexport const enhance = theme(\\n  defaultTheme,\\n  ({\\n    mode = 'light',\\n    showPlaygroundEditor = true,\\n    showLiveError = true,\\n    ...config\\n  }) => ({\\n    ...config,\\n    showLiveError,\\n    showPlaygroundEditor,\\n    initialColorMode: mode,\\n  })\\n)\\n\\nexport default enhance(Theme)\\n\")), mdx(\"p\", null, \"Now this is just a minimal working theme, so lets add our changes,\\nfirst lets grab our layouts (well make the new ones next):\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"import { Layout as DefaultLayout } from 'gatsby-theme-docz/src/components/Layout'\\nimport { Layout as ContentLayout } from '../components/layouts/content'\\nimport { Layout as EmptyLayout }  from '../components/layouts/empty'\\n\\n\")), mdx(\"p\", null, \"Now inside of our theme component we will use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"useCurrentDoc\"), \" hook provided by docz.   \"), mdx(\"p\", null, \"It allows us to get the currently loaded documents front-matter to see which layout it is asking for.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\"\n  }), \"const Theme = ({ children }) => {\\n  const { themeConfig } = useConfig()\\n  const currentDoc = useCurrentDoc()\\n\\n  const layouts = {\\n    default: DefaultLayout,\\n    content: ContentLayout,\\n    empty: EmptyLayout,\\n  }\\n\\n  const layoutName = currentDoc && currentDoc.layout ? currentDoc.layout : 'default'\\n  const layout = layouts[layoutName]\\n  \\n  const componentMap = {\\n    ...components,\\n    layout,\\n  }\\n  return (\\n    <ThemeProvider theme={themeConfig} components={componentMap}>\\n      <ComponentsProvider components={componentMap}>\\n        <Styled.root>{children}</Styled.root>\\n      </ComponentsProvider>\\n    </ThemeProvider>\\n  )\\n}\\n\")), mdx(\"p\", null, \"Now lets make our layouts.  \"), mdx(\"p\", null, \"Of Course there are definatly better ways to do this but my goal\\nhere is just to keep everything working like it is.  \"), mdx(\"p\", null, \"So for the layout that will still have the header component im will just copy the default layout definition.   \"), mdx(\"p\", null, \"For the empty one we can just return our children wrapped in a div.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"filename=src/components/layouts/content.jsx\",\n    \"filename\": \"src/components/layouts/content.jsx\"\n  }), \"/** @jsx jsx */\\nimport { useRef } from 'react'\\nimport { jsx, Layout as BaseLayout, Main, Container } from 'theme-ui'\\nimport { Global } from '@emotion/core'\\n\\nimport global from 'gatsby-theme-docz/src/theme/global'\\nimport { Header } from 'gatsby-theme-docz/src/components/Header'\\nimport * as styles from 'gatsby-theme-docz/src/components/Layout/styles'\\n\\nexport const Layout = ({ children }) => {\\n  const nav = useRef()\\n\\n  styles.wrapper.display = 'flex'\\n\\n  return (\\n    <BaseLayout sx={{ '& > div': { flex: '1 1 auto' } }} data-testid=\\\"layout\\\">\\n      <Global styles={global} />\\n      <Main sx={styles.main}>\\n        <Header nav={nav} onOpen={()=>{}} />\\n        <div sx={styles.wrapper}>\\n          <Container sx={styles.content} data-testid=\\\"main-container\\\">\\n            {children}\\n          </Container>\\n        </div>\\n      </Main>\\n    </BaseLayout>\\n  )\\n}\\n\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-jsx\",\n    \"metastring\": \"filename=src/components/layouts/empty.jsx\",\n    \"filename\": \"src/components/layouts/empty.jsx\"\n  }), \"/** @jsx jsx */\\nimport { jsx, Box } from 'theme-ui'\\n\\n\\nexport const Layout = ({children, ...props}) =>{\\n  return (\\n    <Box {...props}>\\n      {children}\\n    </Box>\\n  )\\n}\\n\")), mdx(\"p\", null, \"Now i can get whichever layout i want loaded for a page through\\nits front-matter.\\nCool huh? \"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"feaec4fd-de6e-57bc-8895-67b0e2167936"}}}